# Chapter 08 서블릿 기초 문법  
<details>
  <summary> 8.1 서블릿이란?</summary>
  
- 서블릿은 Sun(사)에서 웹 프로그래밍(동적인 웹페이지 콘텐츠를 생성)을 제공하기 위해 JSP 이전에 나온 기술
- 서블릿의 자바 코드를 사용하기 때문에 자바의 많은 장점을 사용 가능한 반면, HTML, CSS및 자바 스크립트 그리고 웹 디자인과 연동하기에는 많은 단점이 있다. -> JSP를 만들었다.
- 단점이 많지만 서블릿의 존재 이유
  - JSP에는 없는 서버 측 프로그램의 기능
  - 대규모 프로젝트에 사용되는 프레임워크의 기술을 사용
  
### 8.1.1 이클립스로 서블릿 만들기  
```java
package ch08;
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/ch08/exampleServlet01")                         // 서블릿 호출 될 이름을 선언한다.
public class ExampleServlet01 extends HttpServlet {           // 서블릿으로 만들기 위해서는 반드시 상속해야 하는 클래스이다.
@Override
  protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  response.setContentType("text/html; charest=EUC-KR");       // 브라우저로 응답할 때의 타입과 캐릭터 셋을 결정한다.
  PrintWriter out = response.getWriter();                     // 브라우저에 출력하기 위한 스트림이다.
  //html 시작
  out.println("<html>");
  out.println("<body>");
  out.println("<h1>이클립스로 서블릿 만들기</h1>");
  out.println("</body>");
  out.println("</html>");
  //html 끝
  }
}
```
  
  ---

### 8.1.2 서블릿의 주요 클래스
1. **HttpServlet**
- 서블릿을 만들기 위해 반드시 상속해야 할 필수 클래스
- 존재 목적 자체가 서블릿을 만들기 위해 제공되는 클래스

|메서드|설명|
|:---:|---|
|void init()|서블릿의 객체가 생성될 때 호출되는 메서드|
|void destroy()|서블릿의 객체가 메모리에서 사라질 때 호출되는 메서드|
|void service(request, response)|서블릿의 요청이 있을 때 호출되는 메서드|
|void doGet(request, response)|html에서 form의 메서드가 get일 때 호출되는 메서드|
|void doPost(request, response)|html에서 form의 메서드가 post일 때 호출되는 메서드


2. **HttpServletRequest**
- 클라이언트가 데이터를 입력하거나 또는 클라이언트에 대한 정보에 대한 요청 값을 가지고 있는 클래스

|메서드|설명|
|:---:|---|
|String getParameter(name)|name에 할당된 값을 반환하며 지정된 파라미터 값이 없으면 null 값을 반환한다.|
|String[] getParaneterValues(name)|name의 모든 값을 String 배열로 반환한다.|
|Enumeration getParameterNames()|요청에 사용된 모든 파라미터 이름을 java.util.Enumeration 타입으로 반환한다.|
|void setCharacterEncoding(env)|post 방식으로 요청된 문자열의 character encoding을 설정한다.|

3. **HttpServletResponse**
- 클라이언트가 요청한 정보를 처리하고 다시 응답하기 위한 정보를 담고 있는 클래스

|메서드|설명|
|:---:|---|
|void setHeader(name, value)|응답에 포함될 Header를 설정한다.|
|void setContentType(type)|출력되는 페이지의 contentType을 설정한다.|
|String getCharacterEncoding()|응답 페이지의 문자 인코딩 Type을 반환한다.|
|void sendRedirect(url)|지정된 URL로 요청을 재전송한다.|

4. **HttpSession**
- 클라이언트가 세션의 정보를 저장하고 세션 기능을 유지하기 위해서 제공되는 클래스

|메서드|설명|
|:---:|---|
|String getId()|해당 세션의 세션 ID를 반환한다.|
|long getCreationTime()|세션의 생선된 시간을 반환한다.|
|long getLastAccessedTime()|클라이언트 요청이 마지막으로 시도된 시간을 반환한다.|
|void setMaxInactiveInterval(time)|세션을 유지할 시간을 초단위로 설정한다.|
|in getMaxInactiveInterval()|setMaxInactiveInterval(time)로 지정된 값을 반환한다. 기본값은 30분이다.|
|boolean isNew()|클라이언트 세션 ID를 할당하지 않은 경우 true 값을 반환한다.|
|void invalidate()|해당 세션을 종료 시킨다.|
  
  ---

### 8.1.3 서블릿의 라이프 사이클  

서블릿은 클라이언트가 브라우저에서 서블릿으로 요청을 하면 해당 서블릿은 언제 객체가 만들어지고 언제 기존에 객체를 재활용하고 언제 종료가 되는지 다른 라이프 사이클이 존재한다.

- init() : 서블릿이 처음으로 요청이 되어 객체가 생성될 때 호출되는 메서드
- service() : 클라이언트가 요청이 있을 때 마다 호출되는 메서드
- destroy() : 서블릿 서비스의 종료 및 재시작 그리고 서블릿 코드가 수정이 될 때 호출되는 메서드
- doGet() : 클라이언트를 요청할 때 form의 메서드가 get 방식일 때 호출되는 메서드
- doPost() : 클라이언트를 요청할 때 form의 메서드가 post 방식일 때 호출되는 메서드

`클라이언트 서블릿 요청 -> init(최초 한 번 호출) -> service, doGet, doPost(반복적 호출) -> destroy(마지막 한 번 호출)`

```java
package ch08;

import java.io.IOException;...
@WebServlet("/ch08/exampleServlet02")       // 서블릿 맵핑 이름을 선언한다.
public class ExampleServlet02 extends HttpServlet {

  @Override
  public void init(ServletConfig config) throws ServletException {
    System.out.println("init 호출");        // 톰캣 서버 콘솔 화면에 출력을 한다.
  }
  @Override
  public void destroy() {
    System.out.println("destroy 호출");
  }
  @Override
  protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    System.out.println("service 호출");
  }
}
```
</details>

<details>
  <summary>8.2 서블릿의 요청 방식</summary>
  
- 브라우저에서 페이지 간에 통신할 수 있는 대표적인 방법은 `get`, `post`방식이 있다.

### 8.2.1 get 방식  

URL을 통해서 전송되며, URL이 노출되기 때문에 보안적인 내용은 작성하면 안된다.
```jsp
<%@ page contectType="text/html; charset=EUC-KR"%>
<html>
<body>
<h1>Get Servlet 방식</h1>
<form method="get" action="getServlet">
msg : <input name="msg">
<input type="submit" value="전송">
</form>
</body>
</html>
```
  
  ---

### 8.2.2 post 방식

get 방식과 다르게 url 상에 노출은 되지 않고 html 헤더 값에 값이 전송되는 방식이다.
```jsp
<%@ page contentType="text/html; charest=EUC-KR%>
<html>
<body>
<h1>Post Servlet 방식</h1>
<form method="post" action="postServlet">
id : <input name="id><br/>
pwd : <input type="password" name="pwd'><br/>
email : <input name="eamail"><br/>
<input type="submit" value="가입">
</form>
</body>
</html>
```
  </details>

<details>
<summary>8.3 서블릿에서 세션 사용하기</summary>
 
## 8.3.1 세션
클라이언트(브라우저)와 서버(톰캣)와 통신의 연속성을 유지하기 위해 사용되는 기술 
  ```jsp
<%@ page contentType="text/html; charset=EUC-KR%>
<%
    String id = (String)session.getAttribute("idkey");         // 세션에서 idkey 라는 키 값으로 id 값을 리턴한다.
%>
<html>
<body>
<h1>Servlet 세션</h1>
<%
    if(id!=null) {
%>
<%=id%>님 반갑습니다.<p/>
<a href='longout.jsp'>로그아웃</a>
<%
    } else{
%>
    <form method="post" action="loginServlet">
    id = <input name="id"><br/>
    pwd = <input name="pwd"><br/>
    <input type="submit" value "로그인">
    </form>
    <%} %>
    </body>
    </html>
```
</details>

# Chapter 09 JSP와 자바빈즈
 
<details>
  <summary>9.1 자바빈즈(JavaBeans)란?</summary>
  
  - 자바빈즈의 사용 목적
    - JSP 페이지에 HTML을 제외한 많은 JSP 코드들이 있어 JSP 페이지를 이해하기 어려워진다.
  
    - 관련이 있는 데이터들은 각각의 데이터들을 다루는 것보다는 하나의 클래스를 설계하여 하나의 단위로 다루는 것이 훨씬 효율적이다.
  
    - 효율성, 재사용성 등의 장점을 가진다.
  
    > JSP 안의 자바 코드들이 담당했던 일들을 독립적으로 처리하기 위한 부품과도 같다.
  
  <p align = "center"><img src="https://user-images.githubusercontent.com/106001755/171337109-4c21df07-399d-4050-8c56-c6e5fede82c2.png"></p>
  
  <div align="center">
  자바빈즈를 이용한 JSP 프로그래밍
  </div>
  
  - 자바 빈
    - 자바 프로그램에서 **특정한 작업인 비즈니스 로직을 독립적으로 수행하는 하나의 프로그램 단위**
  
    - 큰 프로그램에서 독립적으로 수행되는 하나의 작은 프로그램 부품을 컴포넌트한다.
  
  - 자바빈즈의 장점
    - JSP 페이지가 복잡한 자바 코드로 구성되는 것을 피할 수 있다.
  
    - **JSP 페이지에 HTML 코드와 쉽고 간단한 자바 코드만을 구성할 수 있다.**
  
    - 한 번 작성된 자바 빈즈를 **여러 응용 프로그램에서 재사용이 가능하다.**
      > 프로그램의 개발 기간도 단축된다.
  
  </details>

  <details>
  <summary>9.2 자바빈즈 만들기</summary>
  
  ### 9.2.1 빈 작성
    
  1. 정보를 저장하는 변수는 모두 **private**로 선언한다.
    
  2. private로 선언된 변수의 값을 **저장**하는 **메서드**를 만든다. 메서드의 이름은 **setXxx()** 형식으로 만든다.
  > Xxx는 변수의 이름과 같으며, **첫 글자는 대문자**이다.
    
  3. private로 선언된 변수의 값을 **가져오는** 메서드를 만든다. 메서드의 이름은 **getXxx()** 형식으로 만든다.
  > Xxx는 변수의 이름과 같으며, **첫 글자는 대문자**이다.
    
  4. setXxx() 메서드와 getXxx() 메서드를 **public**으로 선언하여 둔다.
    
  보기 1: 클래스 형식(빈즈의 형식)
  <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171339120-461814e7-4061-4a55-83ba-400eaf7cbae0.png"></p>
   
  보기 2: 이름을 저장할 빈즈 만들기
  <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171339229-8cd0a198-72f3-47d0-9670-0345c0868dda.png"></p>
    
  보기 3: 전체 보기
  <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171339365-988ce534-03f4-4a26-b41d-8fdb31f049dd.png"></p>

  - **setXxx() 메서드**를 **setter**라고 부르고, **getXxx() 메서드**를 **getter**라고 부른다.
    
  - 빈을 이용한 간단한 JSP 프로그래밍
    
    1. 아래와 같은 경로로 패키지를 생성한다.
    
    <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171340625-d4787747-d3c2-41c6-9fbe-238b33278931.png"></p>
    
    2. 다음과 같이 소스를 src의 ch09 package에 작성하고 저장한다.
    <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171340715-6d3bf85b-9d73-47e6-bf48-87282f2501b9.png"></p>
    
    [ 실습 파일 : src/ch09/SimpleBean.java ]
    
    ```java
    package ch09;
    
    public class SimpleBean {
        private Stirng message = "";
    
        public Stirng getMessage() {
            return message;
        }
      
        public void setMessage(String message) {
            this.message = message;
        }
    }
    ```

    ---
    
  ### 9.2.2 빈 컴파일
  
  - 작성한 순수 자바 파일을 컴퓨터 내부에서 실질적으로 사용할 수 있도록 하기 위해서 하는 작업
    
  - SimpleBean.java 파일이 컴파일되어 SimpleBean.class 파일이 생성된다.
    
    <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171341330-dc174464-0e7d-42b2-b734-e8209d16844a.png"></p>

---
    
  ### 9.2.3 빈을 이용하는 JSP 파일 작성
    
  - 빈 태그
    
  |빈 관련 태그|내용|
  |---|---|
  |<jsp:useBean id="..." class="..." scope"..."/>|빈을 생성하여 둡니다.|
  |<jsp:setProperty name="..." property="..." value="..."/>|빈에 값을 저장한다.|
  |<jsp:getProperty name="..." property="..."/>|빈의 값을 가져온다.|
  
  - scope(생성한 빈이 살아있는(유효한) 영역)의 종류
    - page : 해당 JSP 페이지 내에서만 존재
    - request : 사용자의 요청을 처리하는 동안 존재
    - session : 사용자가 최초에 접속하여 세션이 종료되기까지 존재
    - application : 해당 어플리케이션이 살아 있는 동안 함께 존재
    
    
  보기 1 : 빈을 생성하기
  <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171342464-c2e6a37e-0c16-4774-8dd4-01068dcbcc69.png"></p>
    
  보기 2: 빈에 값을 넣기
  <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171342534-1af11742-11d9-48cf-9a04-283fc2e8f41d.png"></p>
    
  보기 3: 빈의 저장된 값을 가져오기
  <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171342596-8c073718-c4af-4670-b2fe-73092b3dfef1.png"></p>

  **빈을 이용한 JSP 파일 예제**
  1. 빈을 사용하는 JSP 파일을 작성하고 저장한다.
  
  ```jsp
  <%@ page contentType="text/html;charset=EUC-KR" %>
  <jsp:useBean id="test" class="ch09.SimpleBean" scope="page" />
  <jsp:setProperty name="test" property="message" value="빈을 쉽게 정복하자!" />
  <html>
  <body>
  <h1>간단한 빈 프로그래밍</h1>
  <br/>
  Message: <jsp:getProperty name="test" property="message" />
  </body>
  </html>
  ```
  
 2. 결과값 확인
 <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171343345-6c8ad61e-6da1-4dd5-9ea1-449298d9e4f4.png"></p>
    
  </details>
 
 <details>
 <summary>9.3 빈을 이용한 회원가입 양식 작성하기</summary>
 
 ### 9.3.1 회원가입 입력 폼 작성  
   
 **회원가입 입력 폼 부분**  

 1. 회원으로부터 입력받을 폼을 만들기 위한 jsp 페이지를 작성하고 저장한다.
 
 ```jsp
 <%@ page contentType="text/html; charset=EUC-KR" %>
<html>
<head>
<title>회원가입</title>
<link href="style.css" rel="stylesheet" type="text/css">
<script language="JavaScript" src="script.js"></script>
</head>
<body bgcolor="#996600">
<table width="500" align="center" cellspacing="0" cellpadding="5" >
  <tr> 
    <td align="center" valign="middle" bgcolor="#FFFFCC"> 
      <table  border="1" cellspacing="0" cellpadding="2"  align="center">
        <form name="regForm" method="post" action="memberProc.jsp">
          <tr align="center" bgcolor="#996600"> 
            <td colspan="3"><font color="#FFFFFF"><b>회원 가입</b></font></td>
          </tr>
           <tr> 
            <td width="100">아이디</td>
            <td width="200"><input name="id" size="15"></td>
            <td width="200">아이디를 적어 주세요.</td>
          </tr>
          <tr> 
            <td>패스워드</td> 
            <td><input type="password" name="pwd" size="15"></td>
            <td>패스워드를 적어주세요.</td>
          </tr>
          <tr> 
            <td>패스워드 확인</td>
            <td><input type="password" name="repwd" size="15"></td>
            <td>패스워드를 확인합니다.</td>
          </tr>
          <tr> 
            <td>이름</td>
            <td><input name="name" size="15"></td>
            <td>고객실명을 적어주세요.</td>
          </tr>  
           <tr>
            <td>생년월일</td>
            <td><input name="birthday" size="27"></td>
            <td>생년월일을 적어주세요.</td>
          </tr>
          <tr>  
            <td>이메일</td>
            <td><input name="email" size="20"></td>
            <td>이메일을 적어주세요.</td>
          </tr>
          <tr> 
            <td colspan="3" align="center"> 
             <input type="button" value="회원가입" onclick="inputCheck()"> &nbsp; 
             <input type="reset" value="다시쓰기"> 
            </td>
          </tr>
        </form>
      </table>
    </td>
  </tr>
</table>
</body>
</html>
```          
          
2. 브라우저를 통해 작성한 입력 폼을 확인   
   
 <p align="center"><img src="https://user-images.githubusercontent.com/106001755/171344787-87498494-ebf5-44fe-a2eb-441f5f528a00.png"></p>

---
   
### 9.3.2 회원정보를 처리하기 위한 빈 작성

**회원정보 처리 부분**
   
01 회원정보 처리를 위한 빈을 작성하고 저장한다.
   
```java
package ch09;
   
public class MemberBean {
   
   private String id;
   private String pwd;
   private String name;
   private String birthday;
   private String email;
   
   public String getId() {
      return id;
   }
   public void setId(String id) {
      this.id = id;
   }
   public String getPwd() {
      return pwd;
   }
   public void setPwd(String pwd) {
      this.pwd = pwd;
   }
   public String getName() {
      return name;
   }
   public void setName(String name) {
      this name = name;
   }
   public String getBirthday() {
      return birthday;
   }
   public void setBirthday(String birthday) {
      this.birthday = birthday;
   }
   public String getEmail() {
      return email;
   }
   public void setEmail(String email) {
      this.email = email;
   }
}
   
```
   
02 작성을 완료한 java 파일을 저장한다.
   
---
   
### 9.3.3 회원입력 정보확인 
   
**회원입력 정보확인 부분**   
   
01 사용자가 입력한 정보를 화면에 출력하는 파일을 코딩하고 저장한다.

```jsp

<%@ page contentType="text/html; charset=EUC-KR" %>
<% 
request.setCharacterEncoding("EUC-KR");
%>
<jsp:useBean id="regBean" class=“ch09.MemberBean"/>
<jsp:setProperty name="regBean" property="*"  />  // member.jsp에서 변수값 모두 저장
<html>
    <head>
    <title>회원가입 확인</title>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#996600">
<table width="80%"align="center" cellspacing="0" cellpadding="5" >
  <tr> 
    <td align="center" valign="middle" bgcolor="#FFFFCC">
  <table width="90%" border="1" cellspacing="0" cellpadding="2＂ align="center">
        <form name="regForm" method="post" action="memberInsert.jsp">
          <tr align="center" bgcolor="#996600"> 
            <td colspan="3"><font color="#FFFFFF"><b> 
              <jsp:getProperty name="regBean" property="name" />
              회원님이 작성하신 내용입니다. 확인해 주세요</b></font></td>
          </tr>
          <tr> 
            <td width="24%">아이디</td>
            <td width="41%"><jsp:getProperty name="regBean" property="id" /></td>
          </tr>
          <tr> 
            <td>패스워드</td>
            <td> <jsp:getProperty name="regBean" property="pwd" /></td>
          </tr>
          <tr>
            <td>이름</td>
            <td> <jsp:getProperty name="regBean" property="name" /></td>
          </tr>
          <tr> 
            <td>생년월일</td>
            <td> <jsp:getProperty name="regBean" property="birthday" /></td>
          </tr>
          <tr>
            <td>이메일</td>
            <td><jsp:getProperty name="regBean" property="email" /></td>
          </tr>
          <tr> 
            <td colspan="2" align="center"> 
          <input type="button" value="확인완료"> &nbsp;
               <input type="button" value="다시쓰기" onClick="history.back()"> 
             </td>
          </tr>
        </form>
      </table>
    </td>
  </tr>
</table>
</body>
</html>
```
  
02 실행 결과(비밀번호를 잘못 입력했을 경우)
  
<p align="center"><img src="https://user-images.githubusercontent.com/106001755/171348736-88fd83ff-fc17-45ae-91a1-39210faeec84.png"></p>

(정상 작동)
  
<p align="center"><img src="https://user-images.githubusercontent.com/106001755/171348919-401b8f31-a687-42ee-9e39-19353d4b6ba6.png"></p>

 </details>

# Chapter 10 데이터베이스 설치 및 기본 SQL문

<details>
<summary>10.1 데이터베이스란</summary>

### 10.1.1 데이터베이스 & DBMS
  
  
  
  
  
  
  
  
  
  
  
  
  
  
